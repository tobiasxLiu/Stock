package main

import (
	"encoding/json"
	"fmt"
        "strconv"
)

type x struct {
       Y string
       V string
       N string
       C string
       Z string 
}

type Person struct {
	MsgArray []x	
}

func main() {
	jsonString := `{"msgArray":[{"tv":"52","ps":"52","pz":"73.8000","bp":"0","fv":"4","oa":"74.5000","ob":"74.0000","a":"73.9000_74.0000_74.1000_74.2000_74.3000_","b":"73.8000_73.7000_73.6000_73.5000_73.4000_","c":"6180","d":"20230428","ch":"6180.tw","ot":"14:30:00","tlong":"1682663400000","f":"42_99_16_59_15_","ip":"0","g":"10_28_10_35_12_","mt":"000000","ov":"143","h":"73.9000","i":"32","it":"12","oz":"74.0000","l":"72.5000","n":"橘子","o":"72.5000","p":"0","ex":"otc","s":"52","t":"13:30:00","u":"79.2000","v":"1521","w":"64.8000","nf":"遊戲橘子數位科技股份有限公司","y":"75.0000","z":"73.8000","ts":"0"},{"tv":"205","ps":"192","nu":"http://www.yuantaetfs.com/#/RtNav/Index","pz":"117.4000","bp":"0","fv":"9","oa":"117.5000","ob":"117.4500","a":"117.4000_117.4500_117.5000_117.5500_117.6000_","b":"117.3500_117.3000_117.2500_117.2000_117.1500_","c":"0050","d":"20230428","ch":"0050.tw","ot":"14:30:00","tlong":"1682663400000","f":"67_11_55_74_50_","ip":"0","g":"27_6_74_39_115_","mt":"000000","ov":"15935","h":"117.5500","it":"02","oz":"117.4500","l":"116.8500","n":"元大台灣50","o":"116.8500","p":"0","ex":"tse","s":"205","t":"13:30:00","u":"127.6000","v":"5616","w":"104.4000","nf":"元大台灣卓越50證券投資信託基金","y":"116.0000","z":"117.4000","ts":"0"},{"tv":"12161","ps":"12160","pz":"502.0000","bp":"0","fv":"49","oa":"503.0000","ob":"502.0000","a":"502.0000_503.0000_504.0000_505.0000_506.0000_","b":"501.0000_500.0000_499.5000_499.0000_498.5000_","c":"2330","d":"20230428","ch":"2330.tw","ot":"14:30:00","tlong":"1682663400000","f":"377_1194_2597_2080_248_","ip":"0","g":"11_81_281_97_118_","mt":"000000","ov":"21100","h":"502.0000","i":"24","it":"12","oz":"502.0000","l":"498.0000","n":"台積電","o":"498.5000","p":"0","ex":"tse","s":"12161","t":"13:30:00","u":"542.0000","v":"24754","w":"444.5000","nf":"台灣積體電路製造股份有限公司","y":"493.5000","z":"502.0000","ts":"0"},{"tv":"12","ps":"12","pz":"12.6500","bp":"0","fv":"2","oa":"13.1000","ob":"12.4500","a":"12.7000_12.7500_12.8000_12.8500_12.9000_","b":"12.6500_12.5500_12.5000_12.4500_12.4000_","c":"3057","d":"20230428","ch":"3057.tw","ot":"14:30:00","tlong":"1682663400000","f":"22_22_26_20_61_","ip":"0","g":"22_3_6_41_26_","mt":"000000","ov":"999","h":"12.9000","i":"25","it":"12","oz":"12.4500","l":"12.5000","n":"喬鼎","o":"12.9000","p":"0","ex":"tse","s":"12","t":"13:30:00","u":"13.7500","v":"1104","w":"11.2500","nf":"喬鼎資訊股份有限公司","y":"12.5000","z":"12.6500","ts":"0"},{"tv":"10609","ps":"10609","pz":"49.1000","bp":"0","fv":"23","oa":"49.2500","ob":"49.2000","a":"49.1500_49.2000_49.2500_49.3000_49.3500_","b":"49.1000_49.0500_49.0000_48.9500_48.9000_","c":"2303","d":"20230428","ch":"2303.tw","ot":"14:30:00","tlong":"1682663400000","f":"1_613_7_14_192_","ip":"0","g":"1288_2146_2268_1665_1535_","mt":"000000","ov":"9831","h":"50.0000","i":"24","it":"12","oz":"49.2000","l":"49.1000","n":"聯電","o":"49.4500","p":"0","ex":"tse","s":"10609","t":"13:30:00","u":"53.7000","v":"58860","w":"44.0000","nf":"聯華電子股份有限公司","y":"48.8500","z":"49.1000","ts":"0"},{"tv":"271","ps":"328","pz":"30.8000","bp":"0","fv":"7","oa":"31.1000","ob":"31.0000","a":"31.1000_31.1500_31.2000_31.2500_31.3000_","b":"31.0500_31.0000_30.9500_30.9000_30.8500_","c":"6160","d":"20230428","ch":"6160.tw","ot":"14:30:00","tlong":"1682663400000","f":"1_18_3_20_3_","ip":"0","g":"2_23_2_37_69_","mt":"000000","ov":"645","h":"31.7000","i":"25","it":"12","oz":"31.1000","l":"30.6000","n":"欣技","o":"30.8000","p":"0","ex":"otc","s":"271","t":"13:30:00","u":"33.4500","v":"4857","w":"27.4500","nf":"欣技資訊股份有限公司","y":"30.4500","z":"31.1000","ts":"0"}],"referer":"","userDelay":5000,"rtcode":"0000","queryTime":{"sysDate":"20230428","stockInfoItem":2170,"stockInfo":85016,"sessionStr":"UserSession","sysTime":"16:28:29","showChart":false,"sessionFromTime":-1,"sessionLatestTime":-1},"rtmessage":"OK","exKey":"if_otc_6180.tw|tse_0050.tw|tse_2330.tw|tse_3057.tw|tse_2303.tw|otc_6160.tw|_zh-tw.null","cachedAlive":93228}`

	var person Person

	err := json.Unmarshal([]byte(jsonString), &person)
	if err != nil {
		fmt.Println("JSON解析錯誤：", err)
		return
	}
//	fmt.Println("姓名：", person.Name)
//	fmt.Println("年齡：", person.Age)
         

	for _, s := range person.MsgArray {
		fmt.Println("N：", s.N)
                fmt.Println("C：", s.C)
                fmt.Println("Z：", s.Z)
                fmt.Println("Y：", s.Y)
                fmt.Println("V：", s.V)

                //string to float
                zz,_ := strconv.ParseFloat(s.Z, 64)
                yy,_ := strconv.ParseFloat(s.Y, 64)
                mm := zz-yy
                chg := mm/yy*100

                //float to string
                tostr := fmt.Sprintf("%f",chg) 

                //uh := "1.23456789"
                cx := tostr[0:4]
                cx = cx + "%"
                fmt.Println(cx)
                fmt.Println("=========")
	}

/*
y 昨日收盤價格
v 累積成交量
n 公司簡稱
c 股票代號
z 當前盤中成交價
*/

}

